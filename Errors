const handleChange: React.ChangeEventHandler<HTMLInputElement> = (e) => {
  const { name, value } = e.target;

  setFormData((prev) => ({
    ...prev,
    [name]: value
  }));

  // Live validation for RACF ID
  if (name === "racf_id") {
    if (!value.trim()) {
      setValidationErrors((prev) => ({ ...prev, racf_id: "RACF ID is required" }));
    } else if (!/^[a-zA-Z0-9]{3,8}$/.test(value)) {
      setValidationErrors((prev) => ({ ...prev, racf_id: "Invalid RACF ID format" }));
    } else {
      setValidationErrors((prev) => {
        const newErrors = { ...prev };
        delete newErrors.racf_id;
        return newErrors;
      });
    }
  }

  // Live validation for Password
  if (name === "password") {
    if (!value) {
      setValidationErrors((prev) => ({ ...prev, password: "Password is required" }));
    } else if (value.length < 8) {
      setValidationErrors((prev) => ({ ...prev, password: "Password must be at least 8 characters" }));
    } else if (!/[A-Z]/.test(value)) {
      setValidationErrors((prev) => ({ ...prev, password: "Password must contain at least one uppercase letter" }));
    } else if (!/[0-9]/.test(value)) {
      setValidationErrors((prev) => ({ ...prev, password: "Password must contain at least one number" }));
    } else {
      setValidationErrors((prev) => {
        const newErrors = { ...prev };
        delete newErrors.password;
        return newErrors;
      });
    }
  }
};
